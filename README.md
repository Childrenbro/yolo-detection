# 基于YOLO算法通用检测系统（YOLO）

## 软件框架说明

本系统基于 **YOLO + PyQt6 + SQLite** 构建，采用 **登录 → 主界面 → 检测线程 → 数据持久化** 的典型桌面应用架构。整体代码结构清晰，模块职责分明。

---

## 1️⃣ `main.py` —— 程序入口与流程控制

**作用说明：**

* 系统**唯一入口文件**
* 初始化 `QApplication`
* 负责 **登录窗口与主界面的切换控制**
* 通过 `AppController` 解耦 UI 页面逻辑

**核心职责：**

* 启动应用
* 登录成功后进入主检测系统
* 管理窗口生命周期

---

## 2️⃣ `ui_login.py` —— 用户登录 / 注册 / 找回密码模块

**作用说明：**

* 实现完整的 **用户身份认证界面**
* 包含：

  * 用户登录
  * 新用户注册
  * 忘记密码 / 重置密码
* 使用 `QStackedWidget` 管理多页面切换

**核心职责：**

* 用户权限入口
* 与数据库模块交互（校验、写入用户信息）
* 保证系统使用的安全性

---

## 3️⃣ `ui_main_window.py` —— 主界面与业务逻辑核心

**作用说明：**

* 系统**核心 UI 文件**
* 构建完整的主界面，包括：

  * 仪表盘
  * 图片检测
  * 视频检测
  * 实时摄像头检测
  * 历史记录
  * 系统设置
  * 帮助 / 反馈 / 使用说明

**核心职责：**

* 管理所有功能页面
* 调度 YOLO 检测线程
* 显示检测结果（图像 + 表格）
* 与数据库交互保存检测历史与反馈信息

---

## 4️⃣ `yolo_detector.py` —— YOLO 检测线程模块

**作用说明：**

* 基于 `QThread` 实现 **YOLO 异步检测**
* 支持三种检测模式：

  * 单张图片
  * 视频文件
  * 实时摄像头

**核心职责：**

* 加载 YOLO 模型（`.pt`）
* 执行目标检测
* 结果筛选（置信度 Top4）
* 输出 **Markdown 格式检测结果**
* 通过信号机制与 UI 实时通信

---

## 5️⃣ `database.py` —— 数据库与数据持久化模块

**作用说明：**

* 使用 **SQLite** 实现轻量级本地数据库
* 系统启动时自动初始化数据表

**包含数据表：**

* `users`：用户账号信息
* `detection_history`：检测历史记录
* `feedback`：用户反馈信息

**核心职责：**

* 用户注册 / 登录校验
* 检测记录存储与查询
* 反馈信息持久化
* 密码加密

---

## 📌 系统整体架构关系

```text
main.py
  └── ui_login.py
        └── database.py
  └── ui_main_window.py
        ├── yolo_detector.py
        └── database.py
```

---

# 使用注意事项（有两处需自行修改）：
* 在`ui_main_windows.py`中找到第443行代码：
`self.model_path_input = QLineEdit("C:\\Users\\20377\\OneDrive\\Desktop\\code2\\best.pt")`
替换成自己训练好的模型文件即可。
* 在`yolo_detector.py`中找到第132行代码：`class_id_map = {"Dent": 0, "Hole": 1, "Rusty": 2}`，把检测类别以及映射标签替换成自己的即可。
